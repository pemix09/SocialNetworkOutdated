@page
@model SocialNetwork.Areas.Identity.Pages.Accounts.MessagesModel
@using SocialNetwork.Models;
@{
}

<head>

</head>
<header>
    <div class="RowFlex">
        <div class="RowFlex" style="gap:20px">
            <svg fill="white" xmlns="http://www.w3.org/2000/svg" width="200" viewBox="0 0 24 24"><path d="M22 5v14h-20v-14h20zm2-2h-24v18h24v-18zm-2 16l-6.526-6.618-3.445 3.483-3.418-3.525-6.611 6.66 5.051-8-5.051-6 10.029 7.446 9.971-7.446-4.998 6.01 4.998 7.99z" /></svg>
            <h1 style="font-size:40px">Wiadomości</h1>
        </div>
        <div class="PictureButton">
            <div class="RowFlex" style="gap:20px">
                <h1>Dodaj nową</h1>
                <svg xmlns="http://www.w3.org/2000/svg" width="100" viewBox="0 0 24 24"><path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6 13h-5v5h-2v-5h-5v-2h5v-5h2v5h5v2z" /></svg>
            </div>
        </div>
    </div>
</header>
<section class="welcomePage">
    
    @if (Model.messages.Count == 0)
    {
        <div class="ColumnFlex">
            <h1>Wygląda na to, że nie masz żadnych wiadomości, może chcesz jakąś wysłać?</h1>
            <div class="PictureButton">
                <svg xmlns="http://www.w3.org/2000/svg" width="100" viewBox="0 0 24 24"><path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6 13h-5v5h-2v-5h-5v-2h5v-5h2v5h5v2z" /></svg>
            </div>
        </div>

    }
    else
    {
<div class="ColumnFlex">
    @foreach (Message message in Model.messages)
    {
        <div class="Message" style="justify-content:space-between;position:relative;">
            <div class="RowFlex" style="align-items:flex-start;">
                <div class="PictureButton" style="margin:20px; ">
                    @if (Model.db.GetUser(message.userID).Result.ProfilePicture != null)
                    {
                        <img id="profilePicture" style="width: 150px; height: 150px; object-fit: cover; border-radius: 50%" src="data:image/*;base64,@Model.db.GetUser(message.userID).Result.ProfilePicture">
                    }
                    else
                    {
                        <svg xmlns="http://www.w3.org/2000/svg" width="150" viewBox="0 0 24 24"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm0 22c-3.123 0-5.914-1.441-7.749-3.69.259-.588.783-.995 1.867-1.246 2.244-.518 4.459-.981 3.393-2.945-3.155-5.82-.899-9.119 2.489-9.119 3.322 0 5.634 3.177 2.489 9.119-1.035 1.952 1.1 2.416 3.393 2.945 1.082.25 1.61.655 1.871 1.241-1.836 2.253-4.628 3.695-7.753 3.695z" /></svg>
                    }
                <div class="UserName">
                    <h1>@Model.db.GetUser(message.userID).Result.FirstName @Model.db.GetUser(message.userID).Result.LastName</h1>
                </div>
                </div>
                <div class="ColumnFlex" style="align-items:flex-start">
                    <h3>@message.date</h3>
                    <p class="PostContent">@message.messageContent</p>
                </div>
                
            </div>
            
        </div>


    }

</div>
        
    }


</section>
